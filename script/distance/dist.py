import numpy as np
import math
import matplotlib.pyplot as plt
import matplotlib
import pandas as pd

devices_translation_data = pd.read_csv("/Volumes/Emmanuel/stage[DELETE]/fix_devices.csv")

devices_translation = {}
dd = []

truc = ["", "5CE176D2CE40","","5CE176D2D780","4CE1768EC080","B026808B73A0","78725DC2BB40","78725D67ED40","78725DC0A530","2C3124C0BCA0","B026808B6C00","A093514E31D0","843DC643B590","5CE176208C20","00BE757B3760","C4B9CDF52320","80E01DC9BF00","78725D6BC420","0027E3DAE040","78725DC2D380","DCF719629F00","78725DC0A390","78725D680B70","A46C2A7EF7B0","A09351522410","0027E31F9BF0","0027E31F9F00","5CE17620DCA0","0027E3BCECC0","843DC6516160","0027E333F8E0","843DC6465C80","843DC665AF70","D4789BB8FE40","5CE176D2CEE0","5CE176D278C0","DCF7196296E0","0062EC284140","78725D989970","5CE176D2E700","5CE17620DD60","B02680918CB0","80E01DD52920","80E01DC9C1F0","5CE176D2C440","5CE176D28680","78725D6BB430","5CE176D2DCA0","843DC643BBA0","DCF7196287E0","0038DF2D2260","A093513899A0","B026808B53F0","843DC6605010","843DC646AE90","00F28B31EE70","B0268096CF30","B0268091C080","2C5741AA1D00","78725D67ED70","5CE176D30380","843DC65C7FC0","A46C2A7EFB80","C4B9CDF34060","A093514E4530","5CE176D30B20","002A10E02080","002A10DBDA80","00BE757B2190","843DC64F2400","A46C2A7EF6A0","0027E3629690","C4B9CDEADA80","78725D989230","78725DC2D6F0","843DC643AC90","843DC65C7F10","5CE176D320C0","B0268096BD70","78725DC2C6E0","843DC643B860","843DC662C4B0","78725DC91F60","78725DC2C3E0","A093514E45A0","78725DC2CD90","78725D6BD950","2C5741AA0400","B0268096AA10","843DC6190B80","843DC6655680","843DC64659E0","A093513E6DC0","78725DC2CCC0","00F28B31F060","5CE176D310E0","B0268096CF20","0062EC302760","00A6CA5FCE90","0062EC34FDB0","A093514E4330","5CE176D2E460","2C5741AAAD60","5CE176D27EE0","5CE176D25E80","A093515221B0","2C3124BF1B40","843DC66020C0","5CE176D2C940","A09351522280","5CE176D30EA0","843DC64ECA20","B0AA77D183F0","B0AA77D91450","E00EDAEA0CC0","5CE176D2B460","B0AA77D1ACD0","B0268096D1F0","843DC6602040","843DC65C7D70","5CE176D252C0","0062EC309C70","5CE176D31200","B4DE31D6C350","5CE176D326E0","5CE176D2E440","78725DC2D7B0","FC5B398492F0","0062EC307EC0","2C3124BE8B80","2C3124BEB6E0","78725D6BD700","78725DC2C0D0","0027E336CB20","B026808D77B0","78725DC09380","843DC6516670","843DC64F24D0","A093515224F0","B0AA77D91440","5CE176D2ED40","2C5741AA1C80","5CE17620E2C0","0062EC350250","4CA64D662240","0062EC307970","5CE176203760","5CE176218840","802DBF818C80","78725D98B1D0","00A6CA737690","843DC6465BA0","C4B9CDEADCC0","5CE176D24B20","5C838F3470D0","78725DC0A480","B0268099B010","78725D67F320","78725D98B0F0","A09351521D20","A093513E6BA0","A093513E6AC0","A093513E7260","5CE176D2D1A0","843DC6515CA0","0062EC349370","78725DC2D600","0027E3CF3AA0","843DC64F24F0","78725DC928B0","843DC64F2430","843DC64F2700","0027E3BCEBC0","2C5741AAD1A0","2C5741AA0C20","0C75BDD36100","843DC6515D70","843DC643B3A0","80E01DD53B90","5CE176D32A60","B0268096CC00","5CE176D24B80","24813B6CC120","5CE176D2D060","0C75BDD353E0","5CE176D2D340","5CE176D26960","843DC665AC60","5CE176D2EE00","A093514E3F50","9077EEDF7960","A093514E3820","0062EC309C60","A093513E6C30","A09351521D90","A0935139D9B0","0027E32EB4E0","78725D680C70","78725D6BBEF0","0038DF2DEDE0","A093514E3BB0","CC7F755FB7C0","5CE176D28940","78725DC09880","78725DC0A890","78725DC092D0","78725D6BC410","843DC646AC40","A093513E61B0","00FEC8F84D70","B0268096BE60","843DC64F2690","A46C2A7C8F40","DCF71962A2E0","5CE17620EA00","5CE176D32960","78725DC0A840","A46C2A7EF2F0","5CE176D2A340","78725D6BBF40","843DC643B460","0C75BDD365E0","5CE176D2D3E0","80E01DC2DED0","843DC6BB2C30","E00EDAEE6010","00A6CA737310","24D79C5A7500","0027E31F6CF0","0062EC348FB0","78725DC0A620","843DC64EC680","B0268096D150","78725D680A50","78725D67F0C0","C4B9CDEBF7E0","70DF2F8882A0","843DC6602110","5CE176D30F20","5CE176D2E000","B0268091B750","002A10E752E0","78725D6BB0B0","5CE17620F400","0027E30E18B0","DCF7196287A0","843DC65158C0","843DC6B5CEC0","78725D67E5F0","2C5741AA72E0","78725D984E50","0062EC351D40","24D79C585D00","780CF0CEC030","0027E31F9B20","003A7D1EE980","843DC65C7EE0","843DC64ECF80","003A7D349410","843DC65C8540","843DC643B2C0","5CE176D2F7A0","78725DC2BD40","5CE17620E120","5CE176D2C400","5CE176D25EC0","5CE176D30020","24813B2BF7A0","B0268096BA70","843DC6515C30","DCF719629D60","2C5741AB09A0","DCF71962A220","2C3124C0EDE0","24D79C5A8660","DCF719628E60","24813B4F7840","A093514E3AE0","5CE176D30C40","5CE176D2D2E0","0027E3629A70","843DC646B2D0","78725DC2CDD0","843DC646A810","843DC643BAB0","843DC6515EA0","5CE176D30F00","5CE176D2D120","B0268096BB30","843DC65C7DA0","78725DC09490","78725D919C90","24D79C5A56C0","C4B9CDF340C0","5CE176D25CA0","5CE176D325A0","5CE176D30A40","DCF719628CA0","C4B9CDEA6860","5CE176D2C320","B026808B6850","843DC65C7E30","78725DC8CD10","843DC66552C0","843DC65160E0","78725D98B120","24D79C5A1840","843DC65162A0","5CE176D26600","843DC64F24E0","78725D6BA210","B0268099AB10","A46C2A7EFF40","78725D98AB30","B02680A504B0","78725DC2C270","A093514E46C0","78725D67EE30","C4B9CDF50900","843DC64F2B80","5CE176D2C800","843DC646A9E0","B0268096CE80","78725D67F230","0062EC348F70","843DC64F2EA0","78725D989B40","78725DC92980","5CE176D30C20","002A1052B430","40017A614740","003A7D449CA0","843DC646AC80","843DC64ECC70","5CE176D2E260","2C574191F700","5CE176D2D4C0","5CE176D2CD80","2C574194A460","4CA64D6600A0","5CE176D2D260","5CE176D2A220","5CE176D2D9E0","5CE176D2DF00","0027E31F97B0","0027E333F070","B0268096CDC0","5CE176D246E0","4CA64D664C80","5CE176D32340","5CE176D31F00","A46C2A867070","A46C2A7A7DB0","5CE176D2ED20","DCF71962A240","78725D98AB00","843DC665B2C0","5CE176213100","A093514E3B00","780CF0CED8B0","B026808B4550","5CE17620A140","5CE176D2EBA0","5CE176D2EEA0","5CE176D2CC20","78725DC0A3D0","78725DA85A60","24D79C59F4C0","5CE176D254A0","78725DC08F30","78725D98ACF0","78725D67F040","78725D6BD8E0","5CE176D2CB20","5CE176D2EE80","5CE176D2D880","5CE176D2EDA0","5CE176D2C8E0","843DC64ECA10","5CE176D2EF00","78725D989990","843DC64F2630","843DC64F2A80","78725DC93CC0","5CE176D2FB00","00A6CA865D50","5CE176D26A40","2C5741AB3B20","78725DC09EF0","78725D67ED50","0038DF2D2D60","78725DC08D50","78725DC2C230","0062EC346830","78725D989B80","843DC646A910","843DC64F2470","24D79C5A1320","A093515222D0","003A7D449F70","003A7D449DE0","78725D6B9FD0","5CE176D255C0","0062EC349430","78725D6BB750","843DC646AD40","0062EC1D6BC0","B026808B6D70","780CF0CEC4B0","843DC6465AE0","003A7D449B30","2C5741AA0800","78725D67E3A0","78725D6809C0","A46C2A7A89E0","2C3124BFADC0","A0935138AB00","78725D6BD1F0","78725DC93150","2C5741AA2B20","A09351521E40","5CE17620EC20","802DBFDD5B20","A09351521CB0","24D79C5A4460","5CE176D2E320","5CE176D28BE0","5CE176D2B1C0","5CE176D2F380","78725DC0A490","78725D989660","0062EC309D40","DCF7196296A0","780CF0022A50","5CE176D2A7E0","843DC65C8250","B02680967170","5CE176D2A180","5CE176D2CDA0","5CE176D327C0","70DF2F7AFCB0","78725DF6BFC0","70DF2F0BEA20","1C6A7A3EA330","9077EE9F0E20","78725D67E420","78725D67F070","2C3124C0BF00","5CE176D2E620","00BE757B2360","78725D6BD7C0","0062EC307950","0C75BDD33BE0","5CE176D29220","4CA64D661260","843DC6516620","0C75BDD321E0","5CE176D2E860","0062EC1D6BA0","0062EC34FE40","C4B9CDF517E0","00BE757B20A0","78725D989BA0","0027E3BCE880","843DC64ED600","4CA64D666500","5CE176207C80","5CE176D304A0","843DC646B2F0","843DC646AE40","843DC643B240","843DC65C8240","843DC646A8A0","DCF719628BA0","A46C2A82F470","B026808B3C40","00A74286C070","70DF2F888380","5CE176D32660","A093513E6CD0","843DC64651D0","2C574195A6A0","843DC65C80D0","843DC643BA30","78725DC09EE0","5CE176D2C760","843DC6515AF0","5CE176D2C3E0","24813B2D3FC0","5CE176D2DD80","4CA64D660580","802DBF6A4DC0","2C5741AAA8C0","78725D6BD6E0","843DC643B320","5CE176D2F4A0","5CE176D2F360","4CA64D6660E0","DCF719647000","843DC64ECFE0","5CE176D2CEA0","78725DC93C40","4CA64D660FC0","5CE176D31560","A093514E44A0","5CE176D2D680","5CE176D2F280","0062EC307EA0","5CE176D32040","5CE176D2DBE0","843DC646AD20","5CE176D2C3C0","843DC65169B0","5CE176D2CF80","843DC662C450","A0ECF9B43DD0","5CE17620E080","5CE176D308C0","843DC64EB570","843DC64F27C0","5CE176D26400","5CE176D326A0","DCF71962A260","5CE176D2D3A0","00FEC8FE8EE0","5CE176D30240","5CE176D26700","5CE176D27340","5CE176209D20","0062EC3022A0","5CE1762082C0","78725DC92950","78725D6BBD30","78725DC90E90","5CE176D31360","2C5741AAD0A0","24D79C59A300","5CE1761E3360","5CE176D312A0","A4B439A76560","78725D6801E0","5CE176D2B720","843DC665B060","78725DC90FD0","78725DC2C0A0","843DC66021A0","003A7D3D57D0","78725DC2C470","0062EC309C80","5CE176D30CC0","5CE176D2DC80","5CE176D2DEC0","78725DC0A070","78725D989690","780CF0CEB7A0","78725DC2AD10","0038DF2D3200","0C75BDD33E20","843DC646AD70","78725DC2D040","5CE176D2F420","5CE176D24D80","5CE176D304C0","B026808B7170","B02680999BC0","78725DC2CC90","0038DF2D3AE0","2C3124BEB640","78725D681000","5CE176D31D00","78725DC2D110","5CE176D307A0","78725D681120","78725D67EF40","380E4D0383F0","5CE176D2E360","C4B9CDEC8440","C4B9CDEAD680","C4B9CDF51DE0","DCF719629560","A093514E3B40","0062EC3E7440","0062EC302390","5CE176D2DC40","843DC6515C80","2C3124BEFB60","A093514E4080","5CE176D32BC0","78725D989630","78725D67E1E0","E4AA5D50BBF0","780CF07BEDB0","B0268096BDA0","A0239FF31900","78725D98AEF0","5CE176D2DB20","DC8C378A11E0","5CE176D316A0","4CA64D661240","5CE176D2E840","0027E30E1590","78725DC2D2E0","00A38EC57FA0","843DC643B310","5CE176D2D020","A093514E3BD0","9077EE9F30C0","B02680A51150","5CE17620F4E0","5CE176D2FEC0","DC8C378A10A0","78725DC2BC40","78725D6BBD80","4CA64D660100","5CE176D2DD60","DCF719629100","5CE17620A420","A46C2A7EF8C0","5CE176D2DA00","002A10E757A0","843DC6866F20","002A1052D310","5CE176D261A0","B026809C8BD0","5CE176D2F1E0","4CE176BA9F80","5CE176209860","5CE176D30440","5CE176D32700","78725DC92870","78725DC92990","5CE176209B80","78725DC092B0","5CE176D2A7C0","5CE176D2F240","0062EC1D6C70","5C838F369480","78725DC2C370","5CE17620E8A0","5CE176D2D560","A093513E6C40","78725DC922B0","2C5741AACE80","A0239F9496B0","78725D67E880","0062EC34FC20","78725DC92070","843DC64F2810","5CE176D31F20","5CE176D26380","5CE176D25C60","843DC6465990","70DF2F1474B0","5CE176D32360","B0268096BF30","5CE176D2F080","0027E3629C60","DCF71962A2A0","78725DC09290","5CE176D28480","0062EC3026E0","DC8C378A1140","802DBFCF31A0","2C5741AA1760","5CE176D2C080","00BE757B2A80","5CE176D2F220","E00EDAEA2270","A093515227E0","5CE176D2E140","2C5741AAB660","5CE176D2C700","5CE176D2EC40","2C5741AA1140","78725D131E30","78725D6BB810","5CE176D30D20","5CE176D2F460","5CE176D25D60","5CE176D32060","B026808B5420","5CE176D26A60","843DC6515E30","5CE176D2F920","A0239FCA74C0","5CE176D2B2E0","5CE176D28F00","843DC65CAD10","5CE176D32A00","5CE176D2F880","5CE176D2EAA0","5CE176D2E1C0","5CE176D2DF60","4CA64D6601A0","843DC643B2E0","5CE176D2D180","5CE176200B00","5CE176D2CCE0","0062EC1D6E60","5CE176D2FDA0","4CE1768EC1C0","5CE176D319E0","70DF2F0BE670","5CE176D31D20","78725D67E120","4CA64D65FFA0","843DC646AB10","70DF2F146770","5CE176D2F2C0","843DC6B36B10","5CE176D2EDE0","5CE176D32CA0","5CE176D316C0","5CE176D2DEE0","5CE176D2C9A0","F80BCBC08E00","5CE176D2C7C0","843DC6515AD0","78725D67E1D0","70DF2F1476A0","78725D67E580","5CE176D25760","5CE17620ACA0","5CE176D2EB00","A0239FF31A20","2C57418FDFE0","843DC65CA920","DCF7196293E0","5CE176D2A100","5CE176D2B560","70DF2F888330","DCF71962A000","5CE176D2F820","5CE176D32300","780CF0CEC330","5CE17620C160","843DC64F2650","5CE176D32220","78725D6BD400","5CE176D32600","70DF2F0C4DB0","780CF0CED590","5CE176D2D8C0","5CE176D2E080","B026808B6F20","2C5741AB0860","5CE176D24A60","002A10E44770","843DC65C82A0","0062EC346810","843DC64ED430","2C3124BEF680","5CE176D241C0","002A10E44B90","5CE176D2DE80","5CE176D2DB80","780CF0CED9D0","DCF719629300","5CE176D29BA0","5CE176D32140","5CE176D25A60","78725DC2BF20","5CE176D29100","5CE176D26620","00A742888700","78725DC2BB20","A0E0AF425AD0","5CE176D309A0","843DC6465B00"]

def assign(x):
    devices_translation[x[0]] = x[1]
    dd.append(x[0])

devices_translation_data[["BaseRadio MAC Address", "AP Name"]].apply(assign, axis = 1)

del devices_translation_data

array = np.fromfile("/Volumes/Emmanuel/stage[DELETE]/.fix_database.csv.graph", count = 769**2, dtype=np.float32)

mat = np.reshape(array, (769, 769))

for i in range(len(truc)):
    if truc[i] in dd:
        truc[i] = devices_translation[truc[i]]

x = np.argsort(truc)
#rmat = np.zeros((769, 769))
#ii = 0
#jj = 0
#for i in range(len(x)):
#    for j in range(len(x)):
#        if (x[i] < 768 and x[j] < 768):
#            rmat[i][j] = mat[x[i]][x[j]]
#            jj += 1
#    if (x[i] < 768):
#        ii += 1
#    jj = 0

mat[np.arange(769), :] = mat[x, :]
mat[:, np.arange(769)] = mat[:, x]

fig, ax = plt.subplots(figsize = (100,100), sharey=True)

truc.sort()
plt.yticks(np.arange(769), truc)

#plt.xlim(0, 300)
#plt.ylim(0, 300)
#im = ax[0].imshow(mat, cmap="binary", norm=matplotlib.colors.LogNorm())
plt.xlim(0, 769)
plt.ylim(0, 769)
im = ax.imshow(mat, cmap="binary", norm=matplotlib.colors.LogNorm())
cbar = fig.colorbar(im, ax=ax)

#plt.tight_layout()
plt.savefig("dist.png")

#plt.imshow(mat, cmap="binary")
#plt.show()
